(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();function f(t){const{id:e,title:r,image_url:a,summary:n,url:o,news_site:i,published_at:m}=t;return`
    <img src="${a}" class="card-img-top" alt="">
    <div class="card-body">
      <h5 class="card-title">${r}</h5>
      <p class="card-text">${n}</p>
      <a href="${o}" target="_blank" rel="noopener noreferrer" class="btn btn-primary">Go to article</a>
      <button type="button" class="btn btn-secondary ${d(e)?"removeFromLibrary":"addToLibrary"} ${e}">${d(e)?"Remove from library":"Add to library"}</button>
    </div>
    <div class="d-flex justify-content-between card-footer">
      <small class="text-body-secondary">Site: ${i}</small>
      <small class="text-body-secondary">${new Date(m).toLocaleString()}</small>
    </div>
  `}function d(t){return localStorage.getItem("artInLibrary")===null&&localStorage.setItem("artInLibrary","[]"),!!JSON.parse(localStorage.getItem("artInLibrary")).find(a=>a.id===t)}function y(t){const e=document.createElement("article");e.classList.add(`art${t.id}`,"card","flex-grow-1","m-2"),e.style="width: 20rem;",e.innerHTML=f(t),document.querySelector("#articlesList").appendChild(e)}function b(t){t.forEach(e=>{y(e)})}function g(){localStorage.getItem("artInLibrary")===null&&localStorage.setItem("artInLibrary","[]"),document.querySelectorAll(".btn").forEach(t=>{t.addEventListener("click",e=>{p(e,e.target.classList[2])})})}function p(t,e){let r=JSON.parse(localStorage.getItem("artInLibrary"));const a=parseInt(t.target.classList[3],10);switch(e){case"addToLibrary":L(t,a,r);break;case"removeFromLibrary":h(t,a,r),document.title=="Library - SpaceFeed"&&(t.target.textContent="Removed",t.target.classList.remove("addToLibrary"));break}}function L(t,e,r){const a=s.find(n=>n.id===e);r.push(a),localStorage.setItem("artInLibrary",JSON.stringify(r)),t.target.textContent="Remove from library",t.target.classList.replace("addToLibrary","removeFromLibrary")}function h(t,e,r){r=r.filter(a=>a.id!==e),localStorage.setItem("artInLibrary",JSON.stringify(r)),t.target.textContent="Add to library",t.target.classList.replace("removeFromLibrary","addToLibrary")}let s=[];function v(t){s.push(...t);function e(r,a){return[...new Map(r.map(n=>[n[a],n])).values()]}s=e(s,"id")}async function S(t=5){const e=`https://api.spaceflightnewsapi.net/v4/articles/?limit=${t}`;return await fetch(e).then(a=>{if(a.ok)return a.json();throw Error(a.status)})}function I(){const t=document.querySelector("#name");localStorage.getItem("name")!==null&&(t.value=localStorage.getItem("name")),t.addEventListener("input",e=>{localStorage.setItem("name",t.value)})}function c(t){switch(t){case"ADD":const e=document.createElement("div");e.classList.add("my-5","mx-5","w-100","spinner"),e.innerHTML=`
        <div class="d-flex align-items-center mx-5">
          <strong>Loading... </strong>
          <div
            class="spinner-border ms-auto"
            role="status"
            aria-hidden="true"
          ></div>
        </div>
        `,document.querySelector("#articlesList").appendChild(e);break;case"REMOVE":document.querySelector(".spinner").remove();break}}const u=15;function O(t){const e=document.querySelector("#artCounter"),r=document.querySelectorAll("article").length;e.textContent=`On site: ${r} of ${t} articles.`}function w(){const t=document.querySelector("#nbrOfArticles");t.value=u,t.addEventListener("input",e=>{let r=e.target.value;document.querySelector("#articlesList").innerHTML="",l(r)})}function A(t){c("ADD");let e=!1;document.addEventListener("scroll",r=>{window.innerHeight+Math.ceil(window.pageYOffset)>=document.body.offsetHeight-50&&!e&&(e=!0,l(t.split("limit=")[1]))}),e=!1}function l(t=u){S(t).then(e=>{b(e.results),O(e.count),A(e.next),g(),v(e.results),c("REMOVE")})}w();I();c("ADD");l();
